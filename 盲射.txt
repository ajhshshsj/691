local RunScriptFirst = false
local Translations = {
    ["Main Function"] = "核心功能",
    ["Enable Laser Pointer"] = "显示敌人激光准星",
    ["Money Farm"] = "货币自动刷取",
    ["Anti-Knockback"] = "抗击退",
    ["Auto Aim"] = "自动瞄准",
    ["Foxname - Blind Shot"] = "此脚本由h汉化",
    ["Info"] = "关于",
    ["Main"] = "主功能",
    ["LocalPlayer"] = "本地玩家",
    ["ESP"] = "透视",
    ["Settings"] = "设置",
    ["Player Highlights"] = "玩家方框显示",
    ["Name & Distance"] = "名称与距离显示",
    ["Shoot Number Line Up"] = "射击数标线",
    ["Walk Speed"] = "行走速度",
    ["Jump Power"] = "跳跃力度",
    ["Reset Character"] = "角色重置",
    ["Fly"] = "飞行",
    ["Fly Speed"] = "飞行速度", -- 补全缺失的逗号
    ["discord.gg/Foxname"] = "此脚本由你们的爸爸h汉化"
}

local function translateText(text)
    if not text or type(text) ~= "string" then return text end
    if Translations[text] then return Translations[text] end
    for en, cn in pairs(Translations) do
        if text:find(en) then return text:gsub(en, cn) end
    end
    return text
end

local function translateAllElements()
    local function translateGui(gui)
        for _, element in ipairs(gui:GetDescendants()) do
            if element:IsA("TextLabel") or element:IsA("TextButton") or element:IsA("TextBox") then
                local currentText = element.Text
                if currentText and currentText ~= "" then
                    local translatedText = translateText(currentText)
                    if translatedText ~= currentText then
                        element.Text = translatedText
                    end
                end
            end
        end
    end
    pcall(translateGui, game:GetService("CoreGui"))
    local player = game:GetService("Players").LocalPlayer
    if player and player:FindFirstChild("PlayerGui") then
        pcall(translateGui, player.PlayerGui)
    end
end

local function setupListener()
    local function connectToGui(gui)
        gui.DescendantAdded:Connect(function(descendant)
            if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
                local currentText = descendant.Text
                if currentText and currentText ~= "" then
                    local translatedText = translateText(currentText)
                    if translatedText ~= currentText then
                        descendant.Text = translatedText
                    end
                end
            end
        end)
    end
    pcall(connectToGui, game:GetService("CoreGui"))
    local player = game:GetService("Players").LocalPlayer
    if player and player:FindFirstChild("PlayerGui") then
        pcall(connectToGui, player.PlayerGui)
    end
end

local function startTranslation()
    translateAllElements()
    setupListener()
    spawn(function()
        while true do
            wait(2)
            translateAllElements()
        end
    end)
end

local function loadScript()
    local success, err = pcall(function() 
        loadstring(game:HttpGet("https://raw.githubusercontent.com/afkar-gg/sc/refs/heads/main/blindshot",true))();
    end)
    if not success then
        warn("加载失败:", err)
    end
end

if RunScriptFirst then
    loadScript()
    startTranslation()
else
    startTranslation()
    loadScript()
end
